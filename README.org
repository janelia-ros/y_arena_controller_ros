#+TITLE: y_arena_controller_ros
#+AUTHOR: Peter Polidoro
#+EMAIL: peterpolidoro@gmail.com

* Repository Information
  - Author :: Peter Polidoro
  - License :: BSD

  Valve controller software for the Turner Lab Y-Arena rig.

* Connect to Cockpit Web Console

  https://ycontroller.local:9090

* Run Docker Container

  Container starts automatically when all 16 y_arena_valve_controller boards are
  connected with USB cables and hubs to the Raspberry Pi.

  If you need to want to start it manually after stopping it:

  #+BEGIN_SRC sh
    docker-compose-up
  #+END_SRC

* Find Running Container Name

  #+BEGIN_SRC sh
    docker ps
  #+END_SRC

* Run Bash Commands in Container

  #+BEGIN_SRC sh
    docker exec -it <container name> /bin/bash
    source install/setup.bash
    ros2 node list
  #+END_SRC

* Stop Docker Container

  #+BEGIN_SRC sh
    docker-compose-stop
  #+END_SRC

* Prune Docker Images

  #+BEGIN_SRC sh
    docker system prune
  #+END_SRC

* Raspberry Pi Setup

  https://github.com/janelia-experimental-technology/raspberrypi_setup

  - username: yuser
  - hostname: ycontroller

** Clone this repository

   #+BEGIN_SRC sh
     git clone https://github.com/janelia-ros/y_arena_valve_controller_ros.git
   #+END_SRC

*** Run Setup Script

    #+BEGIN_SRC sh
      python3 pisetup.py install
    #+END_SRC
